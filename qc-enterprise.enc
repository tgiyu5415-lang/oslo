// ==UserScript==
// @name         QC Tool Counter ULTRA PRO ENTERPRISE
// @namespace    http://tampermonkey.net/
// @version      6.0
// @description  Counter + Target + Progress + Stopwatch + Draggable + Enterprise Image Accumulative
// @match        https://admin.therealreal.com/admin/photography/pra/qc_tool/item_list*
// @grant        none
// ==/UserScript==

(function () {
'use strict';

function init() {

if (document.getElementById("qc-counter-pro")) return;

// ================= STORAGE =================
let count = parseInt(localStorage.getItem("qcCount")) || 0;
let target = parseInt(localStorage.getItem("qcTarget")) || 50;
let totalImages = parseInt(localStorage.getItem("qcTotalImages")) || 0;
let countedRenders = JSON.parse(localStorage.getItem("qcCountedRenders") || "[]");

let posX = localStorage.getItem("qcPosX") || 20;
let posY = localStorage.getItem("qcPosY") || 20;
let minimized = localStorage.getItem("qcMin") === "true";
let transparent = localStorage.getItem("qcTransparent") === "true";
let stopwatchTime = parseInt(localStorage.getItem("qcStopwatch")) || 0;
let stopwatchRunning = localStorage.getItem("qcRunning") === "true";

// ================= UI =================
const box = document.createElement("div");
box.id = "qc-counter-pro";
box.style.position = "fixed";
box.style.left = posX + "px";
box.style.top = posY + "px";
box.style.background = "transparent" ? "rgba(0,0,0,0.5)" : "black";
box.style.color = "#ffda86";
box.style.padding = "10px";
box.style.fontSize = "12px";
box.style.border = "1px solid #ffda86";
box.style.borderRadius = "6px";
box.style.zIndex = "9999";
box.style.cursor = "move";
box.style.minWidth = "190px";
box.style.userSelect = "none";

box.innerHTML = `
<div id="qc-header" style="font-weight:bold;margin-bottom:5px;text-align:center;">
QC: <span id="qc-count" style="font-size:15px">${count}</span> |
IMG: <span id="qc-image-count" style="font-size:15px">${totalImages}</span>
</div>

<div id="qc-body">

Target:
<input type="number" id="qc-target-input" value="${target}" style="width:55px;font-size:11px">
<button id="qc-set-target" style="font-size:11px">Set</button>

<div style="margin-top:5px;">
Progress:
<div style="background:#333;height:6px;border-radius:4px;">
<div id="qc-progress" style="height:6px;width:0%;background:#ffda86;border-radius:4px;"></div>
</div>
</div>

<div style="margin-top:6px;">
⏱ <span id="qc-stopwatch">00:00:00</span>
<button id="qc-start-stop" style="font-size:11px">Start</button>
<button id="qc-reset-time" style="font-size:11px">Reset</button>
</div>

<div style="margin-top:6px;">
<input type="number" id="qc-manual" placeholder="Set Count" style="width:70px;font-size:11px">
<button id="qc-set-count" style="font-size:11px">Set</button>
<button id="qc-reset-count" style="font-size:11px">Reset</button>
</div>

<div style="margin-top:6px;">
<button id="qc-reset-images" style="font-size:11px">Reset IMG</button>
<button id="qc-toggle-transparency" style="font-size:11px">Transparency</button>
</div>

</div>
`;

document.body.appendChild(box);

// ================= REMOVE BUTTON BACKGROUND =================
const buttons = box.querySelectorAll("button");
buttons.forEach(btn => {
    btn.style.background = "none";// hapus PNG
    btn.style.backgroundImage = "none";// pastikan tidak ada image
    btn.style.textAlign = "center";// teks tetap di tengah
    btn.style.color = "#ffda86";// optional, biar warna sesuai
    btn.style.border = "1px solid #ffda86"; // tetap border
    btn.style.padding = "3px 5px";// optional, agar lebih rapi
});


// ================= ELEMENTS =================
const countEl = document.getElementById("qc-count");
const imageEl = document.getElementById("qc-image-count");
const progressEl = document.getElementById("qc-progress");
const stopwatchEl = document.getElementById("qc-stopwatch");
const body = document.getElementById("qc-body");

// ================= PROGRESS =================
function updateProgress() {
let percent = Math.min((count / target) * 100, 100);
progressEl.style.width = percent + "%";
progressEl.style.background = percent >= 100 ? "lime" : "#ffda86";
}
updateProgress();

// ================= QC SUBMIT AUTO COUNT =================
document.addEventListener("click", function(e){
if (e.target.closest(".submit-button")){
count++;
localStorage.setItem("qcCount", count);
countEl.textContent = count;
updateProgress();
}
});

// ================= SET TARGET =================
document.getElementById("qc-set-target").onclick = function(e){
e.stopPropagation();
target = parseInt(document.getElementById("qc-target-input").value) || 1;
localStorage.setItem("qcTarget", target);
updateProgress();
};

// ================= MANUAL COUNT =================
document.getElementById("qc-set-count").onclick = function(e){
e.stopPropagation();
let val = parseInt(document.getElementById("qc-manual").value);
if(!isNaN(val)){
count = val;
localStorage.setItem("qcCount", count);
countEl.textContent = count;
updateProgress();
}
};

document.getElementById("qc-reset-count").onclick = function(e){
e.stopPropagation();
count = 0;
localStorage.setItem("qcCount", count);
countEl.textContent = count;
updateProgress();
};

// ================= ENTERPRISE IMAGE WORKLOAD =================
function getRenderKey(){

let cards = document.querySelectorAll('.js-qc-row__image-card');
if(cards.length === 0) return null;

let firstImg = cards[0].querySelector("img");
let firstSrc = firstImg ? firstImg.src : "noimg";

return window.location.href + "|" + cards.length + "|" + firstSrc;
}

function scanEnterpriseWorkload(){

let cards = document.querySelectorAll('.js-qc-row__image-card');
if(cards.length === 0) return;

let renderKey = getRenderKey();

if(!countedRenders.includes(renderKey)){

totalImages += cards.length;
countedRenders.push(renderKey);

localStorage.setItem("qcTotalImages", totalImages);
localStorage.setItem("qcCountedRenders", JSON.stringify(countedRenders));

imageEl.textContent = totalImages;
}
}

setTimeout(scanEnterpriseWorkload, 1500);
setInterval(scanEnterpriseWorkload, 3000);

// ================= RESET IMAGE =================
document.getElementById("qc-reset-images").onclick = function(e){
e.stopPropagation();
totalImages = 0;
countedRenders = [];
localStorage.setItem("qcTotalImages", 0);
localStorage.setItem("qcCountedRenders", JSON.stringify([]));
imageEl.textContent = 0;
};

// ================= STOPWATCH =================
let timer;

function formatTime(sec){
let h = Math.floor(sec/3600);
let m = Math.floor((sec%3600)/60);
let s = sec%60;
return [h,m,s].map(v=>v.toString().padStart(2,"0")).join(":");
}

function updateStopwatch(){
stopwatchEl.textContent = formatTime(stopwatchTime);
localStorage.setItem("qcStopwatch", stopwatchTime);
}

if(stopwatchRunning){
timer = setInterval(()=>{
stopwatchTime++;
updateStopwatch();
},1000);
}

document.getElementById("qc-start-stop").onclick = function(e){
e.stopPropagation();
if(stopwatchRunning){
clearInterval(timer);
stopwatchRunning=false;
localStorage.setItem("qcRunning","false");
this.textContent="Start";
}else{
timer=setInterval(()=>{
stopwatchTime++;
updateStopwatch();
},1000);
stopwatchRunning=true;
localStorage.setItem("qcRunning","true");
this.textContent="Stop";
}
};

document.getElementById("qc-reset-time").onclick = function(e){
e.stopPropagation();
stopwatchTime=0;
updateStopwatch();
};

updateStopwatch();

// ================= TRANSPARENCY =================
document.getElementById("qc-toggle-transparency").onclick = function(e){
e.stopPropagation();
transparent=!transparent;
box.style.background = transparent ? "rgba(0,0,0,0.5)" : "black";
localStorage.setItem("qcTransparent", transparent);
};

// ================= COLLAPSE =================
if(minimized) body.style.display="none";

box.addEventListener("dblclick", function(){
if(body.style.display==="none"){
body.style.display="block";
localStorage.setItem("qcMin","false");
}else{
body.style.display="none";
localStorage.setItem("qcMin","true");
}
});

// ================= DRAG =================
let drag=false, offsetX, offsetY;

box.addEventListener("mousedown", function(e){
if(e.target.tagName==="BUTTON" || e.target.tagName==="INPUT") return;
drag=true;
offsetX=e.clientX-box.offsetLeft;
offsetY=e.clientY-box.offsetTop;
});

document.addEventListener("mousemove", function(e){
if(drag){
box.style.left=(e.clientX-offsetX)+"px";
box.style.top=(e.clientY-offsetY)+"px";
}
});

document.addEventListener("mouseup", function(){
if(drag){
drag=false;
localStorage.setItem("qcPosX",box.offsetLeft);
localStorage.setItem("qcPosY",box.offsetTop);
}
});

}

window.addEventListener("load", function(){
setTimeout(init,1500);
});




})();// ==UserScript==
// @name         New Userscript
// @namespace    http://tampermonkey.net/
// @version      2026-02-23
// @description  try to take over the world!
// @author       You
// @match        https://*/*
// @icon         data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==
// @grant        none
// ==/UserScript==

(function() {
    'use strict';

    // Your code here...
})();